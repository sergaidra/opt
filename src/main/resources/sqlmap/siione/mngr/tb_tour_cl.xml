<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="mngr">
    <typeAlias alias="hashMap" type="java.util.HashMap"/>
    <typeAlias alias="string" type="java.lang.String"/>

    <insert id="TourClDAO.insertTourCl" parameterClass="hashMap">
    <![CDATA[
        INSERT INTO TB_TOUR_CL( CL_CODE
                              , CL_NM
                              , DELETE_AT
                              , WRITNG_ID
                              , WRITNG_DT 
                              , FILE_CODE )
                        VALUES( LPAD(SQ_CL_CODE.NEXTVAL, 5, '0')
                              , #CL_NM#
                              , 'N'
                              , #WRITNG_ID#
                              , SYSDATE
                              , #FILE_CODE# )
    ]]>
    </insert>

    <update id="TourClDAO.updateTourCl" parameterClass="hashMap">
    <![CDATA[
        UPDATE TB_TOUR_CL
           SET CL_NM = #CL_NM#
             , FILE_CODE = #FILE_CODE#
             , UPDT_ID = #UPDT_ID#
             , UPDT_DT = SYSDATE
         WHERE CL_CODE = #CL_CODE#
    ]]>
    </update>

    <delete id="TourClDAO.deleteTourCl" parameterClass="hashMap">
    <![CDATA[
        UPDATE TB_TOUR_CL
           SET DELETE_AT = 'Y'
             , UPDT_ID = #UPDT_ID#
             , UPDT_DT = SYSDATE
         WHERE CL_CODE = #CL_CODE#
    ]]>
    </delete>
    
    <select id="TourClDAO.selectTourClByPk" parameterClass="hashMap" resultClass="hashMap">
    <![CDATA[
        SELECT CL_CODE
             , CL_NM 
             , DELETE_AT
             , WRITNG_ID
             , TO_CHAR(WRITNG_DT,'YYYY-MM-DD') WRITNG_DE
             , UPDT_ID
             , TO_CHAR(UPDT_DT,'YYYY-MM-DD') UPDT_DE
             , FILE_CODE  
          FROM TB_TOUR_CL   
         WHERE CL_CODE = #CL_CODE#      
    ]]>
    </select>

    <select id="TourClDAO.selectTourClList" parameterClass="hashMap" resultClass="hashMap">
    <![CDATA[
        SELECT CL_CODE
             , CL_NM 
             , DELETE_AT
             , WRITNG_ID
             , TO_CHAR(WRITNG_DT,'YYYY-MM-DD') WRITNG_DE
             , DELETE_AT
             , UPDT_ID
             , TO_CHAR(UPDT_DT,'YYYY-MM-DD') UPDT_DE
             , FILE_CODE 
          FROM TB_TOUR_CL   
         WHERE 1 = 1
    ]]>
        <isNotEmpty property="DELETE_AT">
          AND DELETE_AT = #DELETE_AT#        
        </isNotEmpty>
         ORDER BY WRITNG_DT, CL_CODE
    </select>

</sqlMap>